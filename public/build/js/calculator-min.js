var week=7,month=30,gasCost=82e-5,$table=$("#table-result tbody");async function testSimulate(){$("#btn-simulate").prop("disabled",!0);const t=$("#combat-character").val(),a=$("#combat-weapon").val(),e=$("#combat-stamina").val();$table.html("");try{console.log(t,a,e),$table.html('<tr><td class="text-white text-center" colspan="13">Calculating....</span></tr>');const n=await fetchFightGasOffset(),r=await fetchFightBaseline(),l=characterFromContract(t,await getCharacterData(t)),c=weaponFromContract(a,await getWeaponData(a)),o=await characterTargets(t,a),d=await getEnemyDetails(o),i=await Promise.all(d.map(async t=>{const a=getAlignedCharacterPower(l,c);return{enemy:t,skill:fromEther(await usdToSkill(web3.utils.toBN(Number(n)+Number(r)*Math.sqrt(parseInt(t.power)/1e3)*parseInt(e)))),exp:Math.floor(t.power/a*32)*parseInt(e)}}));let m=0,p=0,w=0,h=0;i.forEach(t=>{const a=Number(t.skill),e=Number(t.exp);0===m&&(m=a),a>p&&(p=a),a<m&&(m=a),0===w&&(w=e),e>h&&(h=e),e<w&&(w=e)}),$table.html("");for(var s=parseInt(288/(40*e));s>0;s--)$table.append(` <tr>\n                                <td class="text-white">${s}</td>\n                                <td class="text-success">${parseFloat(m*s).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(p*s).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(w*s)}</td>\n                                <td class="text-warning">${parseInt(h*s)}</td>\n                                <td class="text-success">${parseFloat(m*s*week).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(p*s*week).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(w*s*week)}</td>\n                                <td class="text-warning">${parseInt(h*s*week)}</td>\n                                <td class="text-success">${parseFloat(m*s*month).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(p*s*month).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(w*s*month)}</td>\n                                <td class="text-warning">${parseInt(h*s*month)}</td>\n                            </tr>`);$("#btn-simulate").removeAttr("disabled")}catch(t){alert(t.message),$("#btn-simulate").removeAttr("disabled")}}